  
.container
  .row
    %h2.page-header 
      Your Business Cards
      %button.btn.btn-danger{"data-target" => "#newCardModal ", "data-toggle" => "modal", :type => "button"} Add New Card

  .row
    .pull-right.controls.controls-row{:style => 'margin-top: -20px;'}
      =form_tag cards_path, :method => 'get', :class => 'form-horizontal form-search' do
        .input-append
          = text_field_tag :search, params[:search], :class => 'search-query input-medium'
          = submit_tag "Search", :name => nil, :class => 'btn'
  .row
    .span12
      %ul.thumbnails
        - if current_user.cards
          - current_user.cards.each do |c|
            %li.span3
              %a.thumbnail{"data-target" => "##{c.id} #showCardModal", "data-toggle" => "modal", :type => "button", :style => "width:250px; height:150px; background-color:white"}= image_tag(c.card.url(:medium))
            %div{:id => "#{c.id}"}
              #showCardModal.modal.hide.fade{"aria-hidden" => "true", "aria-labelledby" => "showCardModalLabel", :role => "dialog", :tabindex => "-1"}
                .modal-header
                  %button.close{"aria-hidden" => "true", "data-dismiss" => "modal", :type => "button"} ×
                  %h3#showCardModalLabel View Card
                .modal-body
                  = image_tag c.card.url(:large)
                  %div{:style => "width:500px; text-align:center;"}
                    %button.btn.btn-primary.btn-block{"data-target" => "##{c.id} #editCardModal", "data-toggle" => "modal", :type => "button", "data-dismiss" => "modal"} Edit
                    = link_to 'Delete', (Card.find(c.id)), :method => :delete, :data => { :confirm => 'Are you sure?' }, :class => 'btn btn-danger btn-block'
              #editCardModal.modal.hide.fade{"aria-hidden" => "true", "aria-labelledby" => "editCardModalLabel", :role => "dialog", :tabindex => "-1"}
                .modal-header
                  %button.close{"aria-hidden" => "true", "data-dismiss" => "modal", :type => "button"} ×
                  %h3#editCardModalLabel Edit Card
                .modal-body
                  = simple_form_for(Card.find(c.id), remote: true) do |f|
                    = f.error_notification

                    .form-inputs
                      = f.file_field :card
                    .modal-footer
                      
                      %button.btn{"aria-hidden" => "true", "data-dismiss" => "modal"} Close
                      %button.btn.btn-primary= :submit
= render 'new'